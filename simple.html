<!DOCTYPE html>
<meta charset="utf-8">
<body>
<script src="d3/d3.v3.js"></script>
<script src="d3/d3.layout.cloud.js"></script>
<script>
  var fill = d3.scale.category20();
  var data = [{"text": "parsley", "weight": 0.07182309204488058, "rating": 1.0769230769230769}, {"text": "arugula", "weight": 0.04027221952908211, "rating": 0.9459459459459459}, {"text": "bok choy/bok choi/pak choy", "weight": 0.03830522629325861, "rating": 0.9292035398230089}, {"text": "", "weight": 0.03046626878104952, "rating": 1.0609756097560976}, {"text": "parsley root", "weight": 0.018804361766046718, "rating": 1.0763358778625953}, {"text": "bell pepper", "weight": 0.01667747825371646, "rating": 1.5483870967741935}, {"text": "hearts of palm", "weight": 0.015593167811007724, "rating": 1.103448275862069}, {"text": "galangal", "weight": 0.015593167811007724, "rating": 1.1379310344827587}, {"text": "jerusalem artichoke/sunchokes", "weight": 0.015133988410856558, "rating": 0.7719298245614035}, {"text": "turnip greens", "weight": 0.011866966866773465, "rating": 1.103448275862069}, {"text": "mustard greens", "weight": 0.009400233138699754, "rating": 1.6521739130434783}, {"text": "arugula", "weight": 0.009349773652711946, "rating": 1.3333333333333333}, {"text": "tomato", "weight": 0.008989695884529247, "rating": 1.2272727272727273}, {"text": "chinese broccoli/kai-lan", "weight": 0.008006899494552355, "rating": 1.155844155844156}, {"text": "celtuce", "weight": 0.007671340900327728, "rating": 1.2413793103448276}, {"text": "lettuce", "weight": 0.006939512824922778, "rating": 0.8823529411764706}, {"text": "burdock root/gobo", "weight": 0.006624806421591245, "rating": 0.9}, {"text": "watercress", "weight": 0.006423096139453133, "rating": 1.5}, {"text": "rapini", "weight": 0.006022442692230179, "rating": 0.9581881533101045}, {"text": "parsnip", "weight": 0.005495412939548361, "rating": 1.1666666666666667}, {"text": "radish", "weight": 0.005297156526734792, "rating": 0.9375}, {"text": "mustard greens", "weight": 0.0052162742118637695, "rating": 0.634765625}, {"text": "tomato", "weight": 0.004917577321113198, "rating": 0.90625}, {"text": "green, purple, white", "weight": 0.004813464653231847, "rating": 1.4444444444444444}, {"text": "water chestnut", "weight": 0.0046035873294902885, "rating": 0.6792035398230089}, {"text": "jerusalem artichoke/sunchokes", "weight": 0.0045401521854613325, "rating": 1.2272727272727273}, {"text": "parsley", "weight": 0.004450473967362978, "rating": 0.6910755148741419}, {"text": "green onions/scallions", "weight": 0.004401569004443884, "rating": 1.6666666666666667}, {"text": "cucumber", "weight": 0.004301806773955086, "rating": 1.1153846153846154}, {"text": "broccoli", "weight": 0.0042774931119626824, "rating": 1.125}, {"text": "iceberg", "weight": 0.0042774931119626824, "rating": 1.0}, {"text": "tomato", "weight": 0.0042774931119626824, "rating": 1.0}, {"text": "", "weight": 0.004216735214439771, "rating": 1.1363636363636365}, {"text": "broccoli", "weight": 0.004143182704483994, "rating": 1.0}, {"text": "turnip", "weight": 0.004034032788972075, "rating": 0.6363636363636364}, {"text": "watercress", "weight": 0.004029906382244874, "rating": 1.0}, {"text": "spinach", "weight": 0.003741807460068358, "rating": 1.4285714285714286}, {"text": "green, red, savoy", "weight": 0.003741807460068358, "rating": 1.0}, {"text": "kale", "weight": 0.003741807460068358, "rating": 1.1428571428571428}, {"text": "watercress", "weight": 0.0036678812742647615, "rating": 0.7777777777777778}, {"text": "turnip", "weight": 0.003655755706182262, "rating": 0.8305084745762712}, {"text": "olive", "weight": 0.0035320695845797445, "rating": 0.9130434782608695}, {"text": "parsley", "weight": 0.003332069469510035, "rating": 1.8}, {"text": "sugar snap peas", "weight": 0.003306935300255498, "rating": 1.0}, {"text": "parsnip", "weight": 0.003306935300255498, "rating": 1.0}, {"text": "swiss chard", "weight": 0.003256827653623562, "rating": 0.9411764705882353}, {"text": "leaf- green leaf, red leaf", "weight": 0.0032265686419639117, "rating": 1.0476190476190477}, {"text": "celery", "weight": 0.0032064075450541907, "rating": 1.0}, {"text": "curly/frisee", "weight": 0.0030938891956684422, "rating": 0.6677631578947368}, {"text": "lettuce", "weight": 0.0030706582998569765, "rating": 0.95}, {"text": "kohlrabi", "weight": 0.10909299298987962, "rating": 3.590909090909091}, {"text": "leaf- green leaf, red leaf", "weight": 0.09526551603647948, "rating": 3.2142857142857144}, {"text": "water spinach", "weight": 0.05370601527224039, "rating": 3.6153846153846154}, {"text": "green onions/scallions", "weight": 0.03846525482755947, "rating": 4.6}, {"text": "parsley root", "weight": 0.03303271780053585, "rating": 3.6}, {"text": "water chestnut", "weight": 0.03303271780053585, "rating": 2.8}, {"text": "purslane", "weight": 0.030612882281112475, "rating": 3.2857142857142856}, {"text": "swiss chard", "weight": 0.0241609342649729, "rating": 3.1363636363636362}, {"text": "arugula", "weight": 0.022904719199665857, "rating": 4.666666666666667}, {"text": "nopales", "weight": 0.022904719199665857, "rating": 5.0}, {"text": "bamboo shoots", "weight": 0.022904719199665857, "rating": 3.6666666666666665}, {"text": "belgian endive", "weight": 0.022904719199665857, "rating": 5.0}, {"text": "bok choy/bok choi/pak choy", "weight": 0.015212106597835007, "rating": 2.5}, {"text": "sugar snap peas", "weight": 0.015212106597835007, "rating": 5.0}, {"text": "wax beans", "weight": 0.014672536994436047, "rating": 3.4}, {"text": "green onions/scallions", "weight": 0.013084406301149265, "rating": 5.0}, {"text": "spinach", "weight": 0.013084406301149265, "rating": 5.0}, {"text": "bean sprouts", "weight": 0.012852674062486358, "rating": 3.088235294117647}, {"text": "bell pepper", "weight": 0.010910764141377705, "rating": 3.5}, {"text": "parsley", "weight": 0.00793863404781403, "rating": 2.709090909090909}, {"text": "watercress", "weight": 0.007793734246871686, "rating": 3.3518518518518516}, {"text": "rapini", "weight": 0.007214343319017713, "rating": 3.4}, {"text": "fiddlehead", "weight": 0.00653323845092979, "rating": 3.6818181818181817}, {"text": "kohlrabi greens", "weight": 0.006296341047934639, "rating": 4.5}, {"text": "avocado", "weight": 0.005394532000248642, "rating": 3.75}, {"text": "shallots", "weight": 0.005189096960024564, "rating": 3.9722222222222223}, {"text": "", "weight": 0.004755645683929721, "rating": 2.909090909090909}, {"text": "olive", "weight": 0.004587998526258463, "rating": 3.9}, {"text": "corn/maize", "weight": 0.004466782010461134, "rating": 3.096774193548387}, {"text": "purslane", "weight": 0.004152591434680941, "rating": 3.4285714285714284}, {"text": "calabash", "weight": 0.004140270084720621, "rating": 4.363636363636363}, {"text": "kohlrabi greens", "weight": 0.004032222106638672, "rating": 5.0}, {"text": "watercress", "weight": 0.00394552774450152, "rating": 4.055555555555555}, {"text": "greens", "weight": 0.003889303781483555, "rating": 4.2592592592592595}, {"text": "tomatillo", "weight": 0.003805306784200102, "rating": 4.142857142857143}, {"text": "chayote", "weight": 0.00369682833021745, "rating": 2.6666666666666665}, {"text": "kohlrabi greens", "weight": 0.0031882566163923265, "rating": 2.5}, {"text": "grape leaves", "weight": 0.0031882566163923265, "rating": 5.0}, {"text": "curly", "weight": 0.0030474777448139534, "rating": 5.0}, {"text": "romaine", "weight": 0.0029350263700143042, "rating": 4.5}, {"text": "chayote", "weight": 0.002888484219840004, "rating": 4.5}, {"text": "escarole", "weight": 0.0027166010911927607, "rating": 4.0}, {"text": "potato", "weight": 0.002524351951923798, "rating": 3.25}, {"text": "calabash", "weight": 0.002524351951923798, "rating": 3.5}, {"text": "collard greens", "weight": 0.002524351951923798, "rating": 5.0}, {"text": "grape leaves", "weight": 0.0024840874739417984, "rating": 3.5428571428571427}, {"text": "snow peas", "weight": 0.0024630362053219557, "rating": 2.0}, {"text": "nopales", "weight": 0.0022422998276825368, "rating": 4.5}, {"text": "rapini", "weight": 0.0021900416250528743, "rating": 4.7}, {"text": "turnip", "weight": 0.0021900416250528743, "rating": 4.2}];

  var reduced = [];
  for(var i=0; i<data.length; i++){
    reduced.push(data[i].text);
  }

  d3.layout.cloud().size([800, 400])
      .words(reduced.map(function(d) {
        return {text: d, size: 10 + Math.random() * 90};
      }))
      .padding(5)
      .rotate(function() { return ~~(Math.random() * 2) * 90; })
      .font("Impact")
      .fontSize(function(d) { return d.size; })
      .on("end", draw)
      .start();

  function draw(words) {
    d3.select("body").append("svg")
        .attr("width", 900)
        .attr("height", 500)
      .append("g")
        .attr("transform", "translate(450,250)")
      .selectAll("text")
        .data(words)
      .enter().append("text")
        .style("font-size", function(d) { return d.size + "px"; })
        .style("font-family", "Impact")
        .style("fill", function(d, i) { return fill(i); })
        .attr("text-anchor", "middle")
        .attr("transform", function(d) {
          return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
        })
        .text(function(d) { return d.text; });
  }
</script>
